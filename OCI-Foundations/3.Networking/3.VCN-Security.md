## What It Is

VCN (Virtual Cloud Network) security in OCI controls **which traffic can enter or leave your resources** (instances, databases, etc.).

It uses **two main mechanisms**:

- **Security Lists (SL)**
- **Network Security Groups (NSG)**

---

## Security List (SL)

### Definition

A **Security List** acts like a **virtual firewall** for an entire **subnet**.

All instances inside that subnet share the same security rules.

### Rules

Each rule specifies:

- **Direction:** Ingress (inbound) or Egress (outbound)
- **Source/Destination:** CIDR block
- **Protocol:** TCP, UDP, ICMP, etc.
- **Port Range**

### Stateful vs Stateless

- **Stateful:** If incoming traffic is allowed, the response is automatically allowed (no need for a reverse rule).
- **Stateless:** Requires explicit rules for both directions (in and out).

### Example

| Direction | Source/Destination | Protocol | Port | Purpose |
| --- | --- | --- | --- | --- |
| Ingress | 0.0.0.0/0 | TCP | 80 | Allow web traffic from anywhere |
| Egress | 10.0.2.0/24 | TCP | 1521 | Allow DB traffic to private subnet |

---

## Network Security Group (NSG)

### Definition

An **NSG** is a **virtual firewall applied to specific VNICs (Virtual Network Interface Cards)** — not the entire subnet.

This gives you **instance-level control** within the same subnet.

### Features

- Rules can use **other NSGs** as **source or destination** (not just CIDRs).
- **More granular** and flexible than security lists.
- **Can mix** NSG + SL on the same subnet.

### Example

| Direction | Source | Protocol | Port | Purpose |
| --- | --- | --- | --- | --- |
| Egress | NSG B | TCP | 1521 | Allow DB traffic to DB NSG |
| Ingress | NSG A | TCP | 443 | Allow web traffic from web NSG |

---

## Key Differences

| Feature | Security List | Network Security Group |
| --- | --- | --- |
| **Applies to** | Subnet | Specific VNIC(s) |
| **Granularity** | Broad (all instances) | Fine-grained (per instance) |
| **Rule Target** | CIDR only | CIDR or NSG |
| **Use Case** | Simple environments | Complex apps needing tiered security |

---

## Example Architecture

**Public Subnet:** Web servers

**Private Subnet:** Databases

- Web subnet SL → allows inbound 80/443 from Internet (0.0.0.0/0).
- DB subnet SL → allows inbound 1521 only from Web subnet (10.0.1.0/24).
- NSG used for finer control between individual VMs.