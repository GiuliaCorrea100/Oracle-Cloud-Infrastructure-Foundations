# OCI Compartments

## 1. What is a Compartment?

- A **Compartment** is a **logical construct** in OCI used for **isolation, organization, and access control** of resources.
- When you create an OCI account (called a **Tenancy**), you automatically get a **Root Compartment**.
- Best practice: **Do not keep everything in the Root Compartment**. Instead, create dedicated compartments for different purposes.

**Example:**

- **Network Compartment** → VCNs, subnets.
- **Storage Compartment** → block storage, file systems.
- **Compute Compartment** → VMs, instances.

## 2. Key Characteristics

- **Single Ownership:** Each resource belongs to *one compartment* only.
    - To move a resource → either **reassign** or **delete & recreate**.
- **Global Scope:** Compartments are available across all regions in the tenancy.
- **Nested Structure:**
    - Compartments can be nested up to **6 levels deep**.
    - Useful for mimicking **org design** or **identity hierarchy**.

## 3. Why use Compartments?

- **Access Control:** Apply **IAM policies** at the compartment level.
    - Example: Only *storage admins* can access storage resources.
- **Isolation:** Keeps different resource groups separate for security & organization.
- **Organization:** Helps avoid “everything in one bucket” problem.

## 4. Resource Interaction Across Compartments

Resources in different compartments **can interact**.

- Example:
    - Compute instance in Compartment A.
    - Virtual Cloud Network (VCN) in Compartment B.
    - Compute can still use the VCN.

## 5. Managing Compartments

- **Moving Resources:**
    - Many resources (e.g., VM) can be moved between compartments.
- **Policies:** Define **who can access which compartment** and in what way.
- **Quotas:** Restrict resource creation (e.g., block creation of bare metal servers).
- **Budgets:** Track and control spending per compartment (e.g., alert if cost > $1,000).

---

## Summary - Compartments in a Nutshell

- Tenancy = OCI account.
- Root Compartment = default “container” for all resources.
- Best practice: **create dedicated compartments** for better organization and isolation.
- Key properties:
    1. Global (across regions).
    2. Nested (up to 6 levels).
    3. One resource = one compartment.
- Benefits:
    - **Access control** (policies).
    - **Resource isolation**.
    - **Clean architecture design**.
    - **Quotas & budgets** for governance.